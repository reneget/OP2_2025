# OP2_2025 ‚Äî CLI + API –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Ä–∞—Å—á—ë—Å—Ç–∫–æ–π

–î–≤–∞ —Å–µ—Ä–≤–∏—Å–∞: API-—Å–µ—Ä–≤–µ—Ä –∏ –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π CLI. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –º–∞—Å—Å–∏–≤–æ–≤ –º–µ—Ç–æ–¥–æ–º —Ä–∞—Å—á—ë—Å—Ç–∫–∏, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è. –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ —á–µ—Ä–µ–∑ Docker Compose.

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–∫—Ä–∞—Ç–∫–æ)
- Client (CLI): –∫–æ–Ω—Å–æ–ª—å, –æ–±—â–∞–µ—Ç—Å—è —Å API –ø–æ HTTP, —Ö—Ä–∞–Ω–∏—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏.
- Server (API): Minimal API (.NET 8), —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–∞—Å—á—ë—Å—Ç–∫–æ–π, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ SQLite, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (cookie).
- DB: SQLite (`./data/users.db`) —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ `users`, `logs`.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
OP2_2025/
‚îú‚îÄ‚îÄ Server/           # API
‚îÇ   ‚îú‚îÄ‚îÄ Modules/      # Sorting, Logging, Database
‚îÇ   ‚îú‚îÄ‚îÄ Program.cs
‚îÇ   ‚îú‚îÄ‚îÄ appsettings.json
‚îÇ   ‚îú‚îÄ‚îÄ Server.csproj
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îÇ
‚îú‚îÄ‚îÄ Client/           # CLI
‚îÇ   ‚îú‚îÄ‚îÄ Program.cs
‚îÇ   ‚îú‚îÄ‚îÄ Modules/      # Validation, Encryption, HttpClient with retries
‚îÇ   ‚îú‚îÄ‚îÄ Client.csproj
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ OP2_2025.sln
‚îî‚îÄ‚îÄ README.md         # —ç—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–∞—Å—á—ë—Å—Ç–∫–æ–π (Comb Sort) —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏: —à–∞–≥, –≤—Ä–µ–º—è, –≤—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.
- –õ–æ–≥–∏: –≤—Ö–æ–¥–Ω—ã–µ/–≤—ã—Ö–æ–¥–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã, —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–æ–≤, —Ñ–∏–ª—å—Ç—Ä—ã.
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–≤—Ö–æ–¥.
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è: Docker, Docker Compose.
- Swagger UI –¥–ª—è API.
- CLI –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API.

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### Docker Compose
```bash
git clone <repository-url>
cd OP2_2025
docker compose up --build
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:
- API —Å–µ—Ä–≤–µ—Ä: `http://localhost:5247`
- Swagger UI: `http://localhost:5247/swagger`
- CLI –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: `docker attach sorting-client` (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å)

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (CLI)
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç (–ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ —á–µ—Ä–µ–∑ `docker attach sorting-client`).
2. –í–æ–π–¥–∏—Ç–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å.
3. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –≤–≤–µ–¥–∏—Ç–µ –º–∞—Å—Å–∏–≤ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ —Ñ–∞–π–ª, –≤—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ —à–∞–≥ (–∏–ª–∏ –∞–≤—Ç–æ).
4. –õ–æ–≥–∏: —Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ (–Ω—É–∂–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è).
5. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã–≤–æ–¥–∞: –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –ø–æ–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–∏—Å—Ö–æ–¥–Ω—ã–π/–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤, —à–∞–≥, –≤—Ä–µ–º—è, –¥–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è).

---

## API (Swagger)
–û—Ç–∫—Ä—ã—Ç—å `http://localhost:5247/swagger` –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:
- `POST /api/signup` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/login` ‚Äî –≤—Ö–æ–¥ (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç cookie)
- `POST /api/sort` ‚Äî —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (cookie –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞)
- `GET /api/logs` ‚Äî –ª–æ–≥–∏ (cookie –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞)

---

## –ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (Server)
- CombSortModule ‚Äî —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–∞—Å—á—ë—Å—Ç–∫–æ–π.
- LogManager ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ SQLite, —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Ö–æ–¥–Ω—ã—Ö/–≤—ã—Ö–æ–¥–Ω—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤.
- DBManager ‚Äî —Ä–∞–±–æ—Ç–∞ —Å SQLite, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –ª–æ–≥–∏.

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
### –°–µ—Ä–≤–µ—Ä
- `PORT` ‚Äî –ø–æ—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5247)
- `ASPNETCORE_URLS` ‚Äî `http://0.0.0.0:5247`
- `Database:Path` ‚Äî –ø—É—Ç—å –∫ –ë–î (`./data/users.db` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

### –ö–ª–∏–µ–Ω—Ç (CLI)
- `SERVER_URL` ‚Äî URL API (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `http://localhost:5247`, –≤ Docker ‚Äî `http://server:5247`)

---

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite)
- `users`: Id, Login (UNIQUE), Password (SHA256+Base64), CreatedAt.
- `logs`: Id, Timestamp (UTC), Level, Message, UserId, InputArray (CSV), OutputArray (CSV), CreatedAt.

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- .NET 8, ASP.NET Core (Minimal API)
- SQLite
- Docker, Docker Compose
- Swagger / OpenAPI

---

## –õ–∏—Ü–µ–Ω–∑–∏—è
–°–º. LICENSE –≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [README —Å–µ—Ä–≤–µ—Ä–∞](Server/README.md) - –¥–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API —Å–µ—Ä–≤–µ—Ä–∞
- [README –∫–ª–∏–µ–Ω—Ç–∞](Client/README.md) - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤–µ–±-–∫–ª–∏–µ–Ω—Ç–∞
